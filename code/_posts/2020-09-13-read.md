---
title: Track your books with GitHub Actions
image: 2020-07-05-feedback-library-2.png
tags:
  - Node.js
  - GitHub
---

I built [read action](https://github.com/katydecorah/read-action), a GitHub Action, that tracks the books that you've read. Services, like Goodreads, already exist, but I want to own my data.

## How it works

After I finish a book, I create an issue in this repository and enter the ISBN as the title and add the `read` label. Once I open the issue, the GitHub action, kicks off.

The action parses the issue title to extract the ISBN. Then it uses [node-isbn](https://www.npmjs.com/package/node-isbn) to grab the metadata for the book. If I added any content to the body of the issue, the action will set it as the value of `notes` in the book entry. The action will also set the `dateFinished` to today, unless I specify a `YYYY-MM-DD` value in the title of the issue. As a last step, the action fetches my repository's library (`_data/read.yml`), adds the book entry, and rewrites the file.

Finally, the workflow commits the changes to the yaml file and close the originating issue.

{% include button.html title="Try the read action" href="https://github.com/katydecorah/read-action" %}

## Pair it with iOS Shortcuts

I created an iOS Shortcut to help me automate issue creation.

When I click the "Log book" iOS Shortcut, it asks me: _What's the ISBN?_, _When did you finish the book?_ and _Any notes?_ Using the responses from these three questions, the shortcut will then use GitHub's [create an issue endpoint](https://docs.github.com/en/rest/reference/issues#create-an-issue) and open the issue.

{% include button.html title="Download the Log book iOS Shortcut" href="#" %}

## Display your library

Since I'm using a Jekyll data file, I can parse the data to list all the books I've read this year.

{% assign sorted = site.data.read | sort: 'dateFinished' | where_exp:"item",
"item.dateFinished contains 2020" %}

I read {{sorted | size}} books in 2020.

<div class="books">
{% for book in sorted %}
<a href="{{book.canonicalVolumeLink}}" class="book" style="background-image: url({{book.imageLinks.thumbnail}})"><span class="visually-hidden">{{book.title}}</span></a>
{% endfor %}
</div>
